{"version":3,"sources":["00 global.js","30 onboard.js","32 play.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["$.ajaxSetup({\n  headers: {\n    'X-CSRFToken': $('meta[name=\"csrf_token\"]').attr('content'),\n  }\n});\n\n// Block UI widget\n(function ($) {\n  // Save a copy of the block UI element for future use\n  var block = $('#block-ui')\n    .clone()\n    .removeAttr('id')\n    .removeClass('hidden')\n    .hide();\n\n  var widget = function(parent, show) {\n    this.block = block.clone();\n\n    this.parent = $(parent);\n    this.parent.append(this.block);\n\n    this.show();\n  };\n\n  widget.prototype = {\n    hide: function (completed) {\n      this.block.fadeOut(300, function () {\n        $(this).remove();\n      })\n    },\n\n    show: function (completed) {\n      this.block.fadeIn(300);\n    }, \n  };\n\n  window.BlockUi = widget;\n})(jQuery);","(function ($) {\n\n$('body.onboard .friends button').click(function(){\n  var selector = $('.friend-invite');\n  var selected = selector.find('input:checked');\n  var ids = selected.map(function(){\n      return $(this).val();\n  }).get();\n\n  // These are defined on the selector tag itself using data-* attributes\n  var url = selector.data('request-url'),\n    message = selector.data('message');\n\n  var block = new BlockUi(selector);\n\n  // See: https://developers.facebook.com/docs/games/services/gamerequests\n  FB.ui({method: 'apprequests',\n    message: message,\n    to: ids.join(','),\n  }, function(response){\n    if (!response || 'error_code' in response) {\n      block.hide();\n      return;\n    }\n\n    selected.closest('label')\n        .fadeOut();\n\n    // Fire off Ajax request\n    $.post(url, {\n      response: response\n    }).fail(function () {\n      // TODO: Figure out front end error handling strategy\n    }).always(function () {\n      block.hide();\n    });\n  });\n});\n\n})(jQuery);\n\n","(function ($) {\n  var verbBtn = $('body.game .verb-button');\n  var gameArea = $('body.game .game-area');\n  var url = gameArea.data('url'),\n      setId = gameArea.data('set'),\n      model = gameArea.data('model');\n\n  verbBtn.click(function(evt){\n    evt.preventDefault();\n\n    // Make sure the button can't be clicked more than once\n    var $t = $(this);\n    if ($t.data('clicked'))\n      return;\n    $t.data('clicked', true);\n\n    // Remove the same option from all other profile\n    var verb = $t.data('verb');\n    verbBtn.not(this).filter(function () {\n      return $(this).data('verb') == verb;\n    }).css('visibility', 'hidden');\n\n    // Remove all other option on the same profile\n    $t.closest('li')\n      .siblings()\n      .find('button')\n      .remove();\n\n    // Mark the game card as selected\n    $t.closest('.game-card-unselected')\n      .removeClass('game-card-unselected');\n\n    // Save action using Ajax\n    var subject = $t.closest('.game-card')\n      .data('subject');\n    $.post(url, {\n      set: setId,\n      model: model,\n      verb: verb,\n      subject: subject\n    }).fail(function () {\n      // TODO: Figure out what to do in case of failures\n    });\n  });\n\n})(jQuery);"],"sourceRoot":"/source/"}