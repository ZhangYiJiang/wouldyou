!function(e){if("function"==typeof define&&define.amd)define(e);else if("object"==typeof exports)module.exports=e();else{var n=window.Cookies,o=window.Cookies=e();o.noConflict=function(){return window.Cookies=n,o}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var o=arguments[e];for(var t in o)n[t]=o[t]}return n}function n(o){function t(n,i,r){var c;if("undefined"!=typeof document){if(arguments.length>1){if(r=e({path:"/"},t.defaults,r),"number"==typeof r.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*r.expires),r.expires=a}try{c=JSON.stringify(i),/^[\{\[]/.test(c)&&(i=c)}catch(e){}return i=o.write?o.write(i,n):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),n=n.replace(/[\(\)]/g,escape),document.cookie=[n,"=",i,r.expires&&"; expires="+r.expires.toUTCString(),r.path&&"; path="+r.path,r.domain&&"; domain="+r.domain,r.secure?"; secure":""].join("")}n||(c={});for(var s=document.cookie?document.cookie.split("; "):[],p=/(%[0-9A-Z]{2})+/g,d=0;d<s.length;d++){var f=s[d].split("="),u=f.slice(1).join("=");'"'===u.charAt(0)&&(u=u.slice(1,-1));try{var l=f[0].replace(p,decodeURIComponent);if(u=o.read?o.read(u,l):o(u,l)||u.replace(p,decodeURIComponent),this.json)try{u=JSON.parse(u)}catch(e){}if(n===l){c=u;break}n||(c[l]=u)}catch(e){}}return c}}return t.set=t,t.get=function(e){return t(e)},t.getJSON=function(){return t.apply({json:!0},[].slice.call(arguments))},t.defaults={},t.remove=function(n,o){t(n,"",e(o,{expires:-1}))},t.withConverter=n,t}return n(function(){})});
!function(e){"use strict";function t(e,n){if(!(this instanceof t)){var r=new t(e,n);return r.open(),r}this.id=t.id++,this.setup(e,n),this.chainCallbacks(t._callbackChain)}if("undefined"==typeof e)return void("console"in window&&window.console.info("Too much lightness, Featherlight needs jQuery."));var n=[],r=function(t){return n=e.grep(n,function(e){return e!==t&&e.$instance.closest("body").length>0})},o=function(e,t){var n={},r=new RegExp("^"+t+"([A-Z])(.*)");for(var o in e){var i=o.match(r);if(i){var a=(i[1]+i[2].replace(/([A-Z])/g,"-$1")).toLowerCase();n[a]=e[o]}}return n},i={keyup:"onKeyUp",resize:"onResize"},a=function(n){e.each(t.opened().reverse(),function(){return n.isDefaultPrevented()||!1!==this[i[n.type]](n)?void 0:(n.preventDefault(),n.stopPropagation(),!1)})},s=function(n){if(n!==t._globalHandlerInstalled){t._globalHandlerInstalled=n;var r=e.map(i,function(e,n){return n+"."+t.prototype.namespace}).join(" ");e(window)[n?"on":"off"](r,a)}};t.prototype={constructor:t,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:e.noop,beforeContent:e.noop,beforeClose:e.noop,afterOpen:e.noop,afterContent:e.noop,afterClose:e.noop,onKeyUp:e.noop,onResize:e.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(t,n){"object"!=typeof t||t instanceof e!=0||n||(n=t,t=void 0);var r=e.extend(this,n,{target:t}),o=r.resetCss?r.namespace+"-reset":r.namespace,i=e(r.background||['<div class="'+o+"-loading "+o+'">','<div class="'+o+'-content">','<span class="'+o+"-close-icon "+r.namespace+'-close">',r.closeIcon,"</span>",'<div class="'+r.namespace+'-inner">'+r.loading+"</div>","</div>","</div>"].join("")),a="."+r.namespace+"-close"+(r.otherClose?","+r.otherClose:"");return r.$instance=i.clone().addClass(r.variant),r.$instance.on(r.closeTrigger+"."+r.namespace,function(t){var n=e(t.target);("background"===r.closeOnClick&&n.is("."+r.namespace)||"anywhere"===r.closeOnClick||n.closest(a).length)&&(r.close(t),t.preventDefault())}),this},getContent:function(){if(this.persist!==!1&&this.$content)return this.$content;var t=this,n=this.constructor.contentFilters,r=function(e){return t.$currentTarget&&t.$currentTarget.attr(e)},o=r(t.targetAttr),i=t.target||o||"",a=n[t.type];if(!a&&i in n&&(a=n[i],i=t.target&&o),i=i||r("href")||"",!a)for(var s in n)t[s]&&(a=n[s],i=t[s]);if(!a){var c=i;if(i=null,e.each(t.contentFilters,function(){return a=n[this],a.test&&(i=a.test(c)),!i&&a.regex&&c.match&&c.match(a.regex)&&(i=c),!i}),!i)return"console"in window&&window.console.error("Featherlight: no content filter found "+(c?' for "'+c+'"':" (no target specified)")),!1}return a.process.call(t,i)},setContent:function(t){var n=this;return(t.is("iframe")||e("iframe",t).length>0)&&n.$instance.addClass(n.namespace+"-iframe"),n.$instance.removeClass(n.namespace+"-loading"),n.$instance.find("."+n.namespace+"-inner").not(t).slice(1).remove().end().replaceWith(e.contains(n.$instance[0],t[0])?"":t),n.$content=t.addClass(n.namespace+"-inner"),n},open:function(t){var r=this;if(r.$instance.hide().appendTo(r.root),!(t&&t.isDefaultPrevented()||r.beforeOpen(t)===!1)){t&&t.preventDefault();var o=r.getContent();if(o)return n.push(r),s(!0),r.$instance.fadeIn(r.openSpeed),r.beforeContent(t),e.when(o).always(function(e){r.setContent(e),r.afterContent(t)}).then(r.$instance.promise()).done(function(){r.afterOpen(t)})}return r.$instance.detach(),e.Deferred().reject().promise()},close:function(t){var n=this,o=e.Deferred();return n.beforeClose(t)===!1?o.reject():(0===r(n).length&&s(!1),n.$instance.fadeOut(n.closeSpeed,function(){n.$instance.detach(),n.afterClose(t),o.resolve()})),o.promise()},resize:function(e,t){if(e&&t){this.$content.css("width","").css("height","");var n=Math.max(e/parseInt(this.$content.parent().css("width"),10),t/parseInt(this.$content.parent().css("height"),10));n>1&&this.$content.css("width",""+e/n+"px").css("height",""+t/n+"px")}},chainCallbacks:function(t){for(var n in t)this[n]=e.proxy(t[n],this,e.proxy(this[n],this))}},e.extend(t,{id:0,autoBind:"[data-featherlight]",defaults:t.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(t){return t instanceof e&&t},process:function(t){return this.persist!==!1?e(t):e(t).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff|bmp|svg)(\?\S*)?$/i,process:function(t){var n=this,r=e.Deferred(),o=new Image,i=e('<img src="'+t+'" alt="" class="'+n.namespace+'-image" />');return o.onload=function(){i.naturalWidth=o.width,i.naturalHeight=o.height,r.resolve(i)},o.onerror=function(){r.reject(i)},o.src=t,r.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(t){return e(t)}},ajax:{regex:/./,process:function(t){var n=e.Deferred(),r=e("<div></div>").load(t,function(e,t){"error"!==t&&n.resolve(r.contents()),n.fail()});return n.promise()}},iframe:{process:function(t){var n=new e.Deferred,r=e("<iframe/>").hide().attr("src",t).css(o(this,"iframe")).on("load",function(){n.resolve(r.show())}).appendTo(this.$instance.find("."+this.namespace+"-content"));return n.promise()}},text:{process:function(t){return e("<div>",{text:t})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(t,n){var r=this,o=new RegExp("^data-"+n+"-(.*)"),i={};return t&&t.attributes&&e.each(t.attributes,function(){var t=this.name.match(o);if(t){var n=this.value,a=e.camelCase(t[1]);if(e.inArray(a,r.functionAttributes)>=0)n=new Function(n);else try{n=e.parseJSON(n)}catch(e){}i[a]=n}}),i},extend:function(t,n){var r=function(){this.constructor=t};return r.prototype=this.prototype,t.prototype=new r,t.__super__=this.prototype,e.extend(t,this,n),t.defaults=t.prototype,t},attach:function(t,n,r){var o=this;"object"!=typeof n||n instanceof e!=0||r||(r=n,n=void 0),r=e.extend({},r);var i,a=r.namespace||o.defaults.namespace,s=e.extend({},o.defaults,o.readElementConfig(t[0],a),r);return t.on(s.openTrigger+"."+s.namespace,s.filter,function(a){var c=e.extend({$source:t,$currentTarget:e(this)},o.readElementConfig(t[0],s.namespace),o.readElementConfig(this,s.namespace),r),f=i||e(this).data("featherlight-persisted")||new o(n,c);"shared"===f.persist?i=f:f.persist!==!1&&e(this).data("featherlight-persisted",f),c.$currentTarget.blur(),f.open(a)}),t},current:function(){var e=this.opened();return e[e.length-1]||null},opened:function(){var t=this;return r(),e.grep(n,function(e){return e instanceof t})},close:function(e){var t=this.current();return t?t.close(e):void 0},_onReady:function(){var t=this;t.autoBind&&(e(t.autoBind).each(function(){t.attach(e(this))}),e(document).on("click",t.autoBind,function(n){n.isDefaultPrevented()||"featherlight"===n.namespace||(n.preventDefault(),t.attach(e(n.currentTarget)),e(n.target).trigger("click.featherlight"))}))},_callbackChain:{onKeyUp:function(t,n){return 27===n.keyCode?(this.closeOnEsc&&e.featherlight.close(n),!1):t(n)},onResize:function(e,t){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),e(t)},afterContent:function(e,t){var n=e(t);return this.onResize(t),n}}}),e.featherlight=t,e.fn.featherlight=function(e,n){return t.attach(this,e,n)},e(document).ready(function(){t._onReady()})}(jQuery);
$.ajaxSetup({headers:{"X-CSRFToken":$('meta[name="csrf_token"]').attr("content")}}),function(t){var e=t("#block-ui").clone().removeAttr("id").removeClass("hidden").hide(),o=function(o,n){this.block=e.clone(),this.parent=t(o),this.parent.append(this.block),this.show()};o.prototype={hide:function(e){this.block.fadeOut(300,function(){t(this).remove()})},show:function(t){this.block.fadeIn(300)}},window.BlockUi=o}(jQuery);
!function(t){var e=t(".alert-container");if(e.length){var s=function(e,s,i,a){var n=this;if(this.level=e,this.dismissed=!1,this.alert=t("<div>",{class:"alert alert-"+e}),t("<p>",{html:s}).appendTo(this.alert),i&&t("<i>",{class:"fa fa-2x fa-"+i}).prependTo(this.alert),a){var r=t(this.closeBtnHtml);r.appendTo(this.alert).click(function(){n.dismiss(),"function"==typeof a&&a(alert)})}this.alert.hide()};s.prototype={closeBtnHtml:'<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>',open:function(){this.alert.slideDown(200)},dismiss:function(){if(!this.dismissed){var e=this;this.alert.slideUp(200,function(){t(this).remove(),e.dismissed=!0})}}};var i=function(){var s=this;this.alerts=[],this.alertArea=e,this.alertArea.children().each(function(){s.alerts.push(t(this))})};i.prototype={add:function(t,e,s,i){var a=this.makeButton(t,e,s,i);return this.alerts.push(a),this.alertArea.prepend(a.alert),a.open(),a},clear:function(t){var e,s=[];t?(e=[],this.alerts.forEach(function(i){i.level==t?e.push(i):s.push(i)})):e=this.alerts,e.forEach(function(t){t.dismiss()}),this.alerts=s},makeButton:function(t,e,i,a){return new s(t,e,i,a)}},window.AlertManager=new i,window.Alert=s}}(jQuery);
!function(t){function s(t,s){return'<i class="fa fa-'+s+'"></i> '+t}var i=function(s,i,n){this.button=t(s),this.originalContent=this.button.html(),this.successMessage=i||"Success!",this.successIcon=n||"thumbs-o-up"};i.prototype={defaultSpinner:'<div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>',start:function(){if(this.button.data("started"))return!1;this.button.height(this.button.height()),this.button.width(this.button.width());var t=this.defaultSpinner;return this.button.html(t),this.button.addClass("btn-started").data("started",!0),!0},reset:function(){this.button.html(this.originalContent),this.button.removeClass("btn-started").data("started",!1)},success:function(){var t=s(this.successMessage,this.successIcon);this.button.html(t)}},window.LoadingButton=i}(jQuery);
!function(e){e("body").on("click",".share-btn",function(t){t.preventDefault();var r=e(this),n=r.data("href")||window.location.toString(),a=new LoadingButton(r,"Awesome!","tick fa-2x");a.start()&&FB.ui({method:"share",href:n,mobile_iframe:!0},function(e){e&&!e.hasOwnProperty("error")?a.success():a.reset()})}).on("click",".story-btn",function(t){t.preventDefault();var r=e(this),n=r.data("action"),a=r.data("celebrity"),o=new LoadingButton(r,"Awesome!","tick fa-2x");o.start()&&FB.api("me/"+n,"post",{celebrity:a,access_token:userAccessToken},function(e){e&&!e.hasOwnProperty("error")&&e.hasOwnProperty("id")?o.success():(o.reset(),AlertManager.add("danger","Sorry, something went wrong. Please refresh the page and try again later","exclamation-triangle",!0))})})}(jQuery);
!function(e){e("body.onboard .friends button").click(function(){var n=e(".friend-invite"),i=n.find("input:checked"),t=i.map(function(){return e(this).val()}).get(),o=n.data("request-url"),a=n.data("message"),r=new BlockUi(n);FB.ui({method:"apprequests",message:a,to:t.join(",")},function(n){return!n||"error_code"in n?void r.hide():(i.closest("label").fadeOut(),void e.post(o,{response:n}).fail(function(){}).always(function(){r.hide()}))})})}(jQuery);
!function(e){e(".invite-btn").click(function(r){r.preventDefault();var n=e(this),a=n.data("url"),i=n.data("message"),t=e(".bg-container"),o=new BlockUi(t);FB.ui({method:"apprequests",message:i,filters:["app_non_users"]},function(r){return!r||"error_code"in r||Array.isArray(r)&&!r.length?void o.hide():void e.post(a,{response:r}).done(function(r){r.success||console.error(r);var a=r.data;if(a.hasOwnProperty("redirect"))n.data("no-redirect")?(AlertManager.clear(),AlertManager.add("info","Your friends have been successfully added!","info-circle")):window.location.href=a.redirect;else if(a.hasOwnProperty("required_count")){var i=a.required_count;e(".invite-count").text(i),AlertManager.clear("danger");var t="Sorry, you didn't invite enough friends. Please invite "+i+" or more friends to continue playing.";AlertManager.add("danger",t,"exclamation-triangle")}}).fail(function(){}).always(function(){o.hide()})})})}(jQuery);
if(function(e){var t=3,i=function(t){var i=this;this.gameArea=e(t),this.gameForm=t.find("form"),this.buttons=this.gameArea.find(".verb-btn"),this.selected=[],this.completed=!1,this.gameArea.on("click",".verb-btn",function(t){t.preventDefault(),i.select(e(this))}),this.gameArea.find(".undo-btn").click(function(e){e.preventDefault(),i.undo()}),this.gameForm.submit(function(e){if(!i.completed)return!1})};i.prototype={showLikeAlertAfter:5,undo:function(){this.selected={},this.gameArea.find(".game-card").removeClass("card-selected").addClass("card-unselected"),this.buttons.removeClass("disabled"),this.gameArea.find(".game-card input").prop("checked",!1),this.gameArea.find(".overlay-image").children().hide()},select:function(i){var s=i.data("verb"),a=i.closest(".game-choice").prevAll(".game-choice").length;if(!this.selected.hasOwnProperty(a)){this.selected[a]=s,this.otherButtons(i).addClass("disabled");var n=i.closest(".game-card").removeClass("card-unselected").addClass("card-selected");i.next("input").prop("checked",!0),n.find(".overlay-image").children().filter(function(){return e(this).data("verb")==s}).fadeIn(),Object.keys(this.selected).length===t&&this.complete()}},otherButtons:function(t){var i=t.data("verb");return this.buttons.not(t).filter(function(){return e(this).data("verb")===i})},complete:function(){var t=this,i=this.gameArea.find(".game-card"),s=[];this.completed=!0,this.gameArea.find(".undo-btn").fadeOut(),this.gameArea.find(".skip-btn").hide(),this.gameArea.find(".next-btn").removeClass("hidden"),i.each(function(i){var a=e(this),n=t.selected[i],r=a.find('.game-story[data-verb="'+n+'"]').removeClass("hidden");r.length||s.push(a.find(".friend-stories").data("subject"))}),setTimeout(this.showResults.bind(this),400),s.length&&setTimeout(function(){t.showMatchModal(s)},500),setTimeout(this.showLikeAlert.bind(this),1800)},showResults:function(){this.gameArea.find(".game-card").each(function(t,i){setTimeout(function(){e(i).find(".game-result").fadeIn(300)},400*t)})},showMatchModal:function(t){var i=e(".match-modal");i.find(".player-match").filter(function(){return t.includes(e(this).data("subject"))}).removeClass("hidden"),i.find(".match-btn").click(function(){e.featherlight.close()}),e.featherlight(i)},showLikeAlert:function(){if(!Cookies.get("like_alert_dismissed")){var t=+Cookies.get("complete_count")||0;if(t>this.showLikeAlertAfter){var i=e("footer.global .fb-like").get(0).outerHTML,s="Having fun? Why not spread the word by giving us a like? ";AlertManager.add("info",s+i,"thumbs-o-up",function(){Cookies.set("like_alert_dismissed",!0,{expires:365})})}else Cookies.set("complete_count",t+1,{expires:365})}}},window.Game=i}(jQuery),$("body").hasClass("game"))var game=new Game($(".game-area"));
!function(e){var t=e(".index-header .header-content");t.length&&e(".bg-col").hover(function(){var a=e(this);a.prevAll().length;t.addClass(a.data("verb")+"-selected")},function(){var a=e(this);a.prevAll().length;t.removeClass(a.data("verb")+"-selected")})}(jQuery);
//# sourceMappingURL=app.min.js.map
